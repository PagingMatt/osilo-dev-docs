<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Auth.Token.html">
<link rel="next" href="Auth.CS.html">
<link rel="Up" href="Auth.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of classes" rel=Appendix href="index_classes.html">
<link title="Index of class types" rel=Appendix href="index_class_types.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Api" rel="Chapter" href="Api.html">
<link title="Auth" rel="Chapter" href="Auth.html">
<link title="Coding" rel="Chapter" href="Coding.html">
<link title="Cryptography" rel="Chapter" href="Cryptography.html">
<link title="File_tree" rel="Chapter" href="File_tree.html">
<link title="Http_client" rel="Chapter" href="Http_client.html">
<link title="Http_server" rel="Chapter" href="Http_server.html">
<link title="Peer" rel="Chapter" href="Peer.html">
<link title="Silo" rel="Chapter" href="Silo.html">
<link title="Peer_access_log" rel="Chapter" href="Peer_access_log.html">
<link title="Wm" rel="Chapter" href="Wm.html"><title>Auth.M</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Auth.Token.html" title="Auth.Token">Previous</a>
&nbsp;<a class="up" href="Auth.html" title="Auth">Up</a>
&nbsp;<a class="post" href="Auth.CS.html" title="Auth.CS">Next</a>
</div>
<h1>Module <a href="type_Auth.M.html">Auth.M</a></h1>

<pre><span class="keyword">module</span> M: <code class="code"><span class="keyword">sig</span></code> <a href="Auth.M.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
Instantiates Macaroons functor with <code class="code"><span class="constructor">CRYPTO</span></code> over <code class="code"><span class="constructor">Nocrypto</span></code>. This also
    provides an abstraction over the values in the Macaroons to explicitly
    reference <code class="code">delegate</code>, <code class="code">source</code>, <code class="code">service</code>, <code class="code">path</code> and <code class="code">token</code>.<br>
</div>
<hr width="100%">

<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> </pre>
<div class="info ">
Internal type of capabilities is an instantiation of Macaroons.<br>
</div>


<pre><span id="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">source:<a href="Peer.html#TYPEt">Peer.t</a> -><br>       service:string -><br>       path:string -><br>       delegate:<a href="Peer.html#TYPEt">Peer.t</a> -> token:<a href="Auth.Token.html#TYPEt">Auth.Token.t</a> -> key:Cstruct.t -> <a href="Auth.M.html#TYPEt">t</a></code></pre><div class="info ">
Create a new capability for a given location, presented to <code class="code">delegate</code> and
      signed with <code class="code">key</code>.<br>
</div>

<pre><span id="VALdelegate"><span class="keyword">val</span> delegate</span> : <code class="type"><a href="Auth.M.html#TYPEt">t</a> -> <a href="Peer.html#TYPEt">Peer.t</a></code></pre><div class="info ">
Get the delegate peer that the capability is for.<br>
</div>

<pre><span id="VALsource"><span class="keyword">val</span> source</span> : <code class="type"><a href="Auth.M.html#TYPEt">t</a> -> <a href="Peer.html#TYPEt">Peer.t</a></code></pre><div class="info ">
Get the source peer that the capability can be used at.<br>
</div>

<pre><span id="VALservice"><span class="keyword">val</span> service</span> : <code class="type"><a href="Auth.M.html#TYPEt">t</a> -> string</code></pre><div class="info ">
Get the service that the capability can be used on.<br>
</div>

<pre><span id="VALpath"><span class="keyword">val</span> path</span> : <code class="type"><a href="Auth.M.html#TYPEt">t</a> -> string</code></pre><div class="info ">
Get the path down the file tree that the capability is recursively valid
      under.<br>
</div>

<pre><span id="VALlocation"><span class="keyword">val</span> location</span> : <code class="type"><a href="Auth.M.html#TYPEt">t</a> -> string</code></pre><div class="info ">
Gets the <code class="code">string</code> location the capability can be used at. This is of the
      form <code class="code">source</code>/<code class="code">service</code>/<code class="code">path</code>, taking <code class="code">source</code> to be the <code class="code">string</code>
      representation of the source peer.<br>
</div>

<pre><span id="VALtoken"><span class="keyword">val</span> token</span> : <code class="type"><a href="Auth.M.html#TYPEt">t</a> -> <a href="Auth.Token.html#TYPEt">Auth.Token.t</a></code></pre><div class="info ">
Gets the <code class="code"><span class="constructor">Token</span>.t</code> level of permission this capability gives.<br>
</div>

<pre><span id="VALverify"><span class="keyword">val</span> verify</span> : <code class="type"><a href="Auth.M.html#TYPEt">t</a> -><br>       required_service:string -><br>       key:Cstruct.t -><br>       required:<a href="Auth.Token.html#TYPEt">Auth.Token.t</a> -> this_peer:<a href="Peer.html#TYPEt">Peer.t</a> -> requester:<a href="Peer.html#TYPEt">Peer.t</a> -> bool</code></pre><div class="info ">
Verifies that the given capability was signed by <code class="code">key</code>, and is for use at
      <code class="code">this_peer</code>, by <code class="code">requester</code> on the service <code class="code">required_service</code>. Finally it
      must be carrying a token of at least <code class="code">required</code>. If and only if all this
      is satisfied, <code class="code"><span class="keyword">true</span></code> is returned.<br>
</div>

<pre><span id="EXCEPTIONDeserialisation_failed"><span class="keyword">exception</span> Deserialisation_failed</span> <span class="keyword">of</span> <code class="type">string</code></pre>
<div class="info ">
Raised in the case that a <code class="code">string</code> cannot be deserialised into a
    capability.<br>
</div>

<pre><span id="VALstring_of_t"><span class="keyword">val</span> string_of_t</span> : <code class="type"><a href="Auth.M.html#TYPEt">t</a> -> string</code></pre><div class="info ">
Serialises a capability.<br>
</div>

<pre><span id="VALt_of_string"><span class="keyword">val</span> t_of_string</span> : <code class="type">string -> <a href="Auth.M.html#TYPEt">t</a></code></pre><div class="info ">
Deserialises a <code class="code">string</code> to a capability or raises
      <code class="code"><span class="constructor">Deserialisation_failed</span></code>.<br>
</div>
</body></html>